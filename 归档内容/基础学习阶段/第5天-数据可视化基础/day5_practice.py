#!/usr/bin/env python3
"""
ç¬¬5å¤©ç¼–ç¨‹ç»ƒä¹ ï¼šæ•°æ®å¯è§†åŒ–åŸºç¡€
æ—¶é—´ï¼š15-25åˆ†é’Ÿ
ç›®æ ‡ï¼šç»ƒä¹ 4ç§åŸºæœ¬å›¾è¡¨çš„ç»˜åˆ¶
"""

from statistics import correlation
import numpy as np
import matplotlib.pyplot as plt

# è®¾ç½®ä¸­æ–‡å­—ä½“
plt.rcParams['font.sans-serif'] = ['Arial Unicode MS', 'SimHei']
plt.rcParams['axes.unicode_minus'] = False

print("ğŸ“Š ç¬¬5å¤©ç¼–ç¨‹ç»ƒä¹ ï¼šæ•°æ®å¯è§†åŒ–")
print("=" * 35)
print("è¯·å®Œæˆä»¥ä¸‹4ä¸ªå›¾è¡¨ç»ƒä¹ ï¼")
print()

# ==========================================
# ç»ƒä¹ 1ï¼šæŠ˜çº¿å›¾ - ç½‘ç«™è®¿é—®é‡è¶‹åŠ¿
# ==========================================
print("ğŸ“ˆ ç»ƒä¹ 1ï¼šæŠ˜çº¿å›¾ - ç½‘ç«™è®¿é—®é‡è¶‹åŠ¿")
print("-" * 30)

# æ•°æ®ï¼šä¸€å‘¨çš„ç½‘ç«™è®¿é—®é‡
days = ['å‘¨ä¸€', 'å‘¨äºŒ', 'å‘¨ä¸‰', 'å‘¨å››', 'å‘¨äº”', 'å‘¨å…­', 'å‘¨æ—¥']
visits = [1200, 1350, 1180, 1420, 1650, 2100, 1800]

print("ä¸€å‘¨ç½‘ç«™è®¿é—®é‡æ•°æ®:", visits)

# TODO 1: åˆ›å»ºæŠ˜çº¿å›¾
# è¦æ±‚ï¼š
# - ä½¿ç”¨ plt.plot() åˆ›å»ºæŠ˜çº¿å›¾
# - æ·»åŠ æ ‡é¢˜"ç½‘ç«™ä¸€å‘¨è®¿é—®é‡è¶‹åŠ¿"
# - è®¾ç½®xè½´æ ‡ç­¾ä¸º"æ—¥æœŸ"ï¼Œyè½´æ ‡ç­¾ä¸º"è®¿é—®é‡"
# - æ·»åŠ ç½‘æ ¼çº¿

# ä½ çš„ä»£ç ï¼š
plt.figure(figsize=(10, 6))
plt.plot(days, visits, 'o-', linewidth=2)
plt.title('ç½‘ç«™ä¸€å‘¨è®¿é—®é‡è¶‹åŠ¿')
plt.xlabel('æ—¥æœŸ')
plt.ylabel('è®¿é—®é‡')
plt.grid(True)
plt.show()


print("å®ŒæˆæŠ˜çº¿å›¾ç»ƒä¹ ï¼")
print()

# ==========================================
# ç»ƒä¹ 2ï¼šæŸ±çŠ¶å›¾ - äº§å“é”€é‡å¯¹æ¯”
# ==========================================
print("ğŸ“Š ç»ƒä¹ 2ï¼šæŸ±çŠ¶å›¾ - äº§å“é”€é‡å¯¹æ¯”")
print("-" * 30)

# æ•°æ®ï¼šä¸åŒäº§å“çš„é”€é‡
products = ['äº§å“A', 'äº§å“B', 'äº§å“C', 'äº§å“D', 'äº§å“E']
sales = [450, 320, 580, 290, 410]

print("äº§å“é”€é‡æ•°æ®:", sales)

# TODO 2: åˆ›å»ºæŸ±çŠ¶å›¾
# è¦æ±‚ï¼š
# - ä½¿ç”¨ plt.bar() åˆ›å»ºæŸ±çŠ¶å›¾
# - æ·»åŠ æ ‡é¢˜"äº§å“é”€é‡å¯¹æ¯”"
# - è®¾ç½®xè½´æ ‡ç­¾ä¸º"äº§å“"ï¼Œyè½´æ ‡ç­¾ä¸º"é”€é‡"
# - ä¸ºæ¯ä¸ªæŸ±å­æ·»åŠ æ•°å€¼æ ‡ç­¾

# ä½ çš„ä»£ç ï¼š
plt.figure(figsize=(10, 6))
bars = plt.bar(products, sales)
plt.title('äº§å“é”€é‡å¯¹æ¯”')
plt.xlabel('äº§å“')
plt.ylabel('é”€é‡')
for bar,value in zip(bars,sales):
    plt.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 10, f'{value}', ha='center')
plt.grid(True)
plt.show()

print("å®ŒæˆæŸ±çŠ¶å›¾ç»ƒä¹ ï¼")
print()

# ==========================================
# ç»ƒä¹ 3ï¼šæ•£ç‚¹å›¾ - å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢å…³ç³»
# ==========================================
print("ğŸ“ˆ ç»ƒä¹ 3ï¼šæ•£ç‚¹å›¾ - å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢å…³ç³»")
print("-" * 35)

# æ•°æ®ï¼š10ä¸ªæœˆçš„å¹¿å‘ŠæŠ•å…¥å’Œé”€å”®é¢
ad_spend = [10, 15, 8, 20, 12, 18, 25, 14, 22, 16]  # å¹¿å‘ŠæŠ•å…¥ï¼ˆä¸‡å…ƒï¼‰
revenue = [120, 180, 100, 240, 150, 210, 300, 160, 280, 190]  # é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰

print("å¹¿å‘ŠæŠ•å…¥æ•°æ®:", ad_spend)
print("é”€å”®é¢æ•°æ®:", revenue)

# TODO 3: åˆ›å»ºæ•£ç‚¹å›¾
# è¦æ±‚ï¼š
# - ä½¿ç”¨ plt.scatter() åˆ›å»ºæ•£ç‚¹å›¾
# - æ·»åŠ æ ‡é¢˜"å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢å…³ç³»"
# - è®¾ç½®xè½´æ ‡ç­¾ä¸º"å¹¿å‘ŠæŠ•å…¥ï¼ˆä¸‡å…ƒï¼‰"ï¼Œyè½´æ ‡ç­¾ä¸º"é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰"
# - è®¡ç®—å¹¶è¾“å‡ºç›¸å…³ç³»æ•°

# ä½ çš„ä»£ç ï¼š
plt.figure(figsize=(10, 6))
plt.scatter(ad_spend, revenue, s=100)
plt.title('å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢å…³ç³»')
plt.xlabel('å¹¿å‘ŠæŠ•å…¥ï¼ˆä¸‡å…ƒï¼‰')
plt.ylabel('é”€å”®é¢ï¼ˆä¸‡å…ƒï¼‰')
plt.grid(True)
correlation = np.corrcoef(ad_spend,revenue)[0][1]
print(f"å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢ç›¸å…³ç³»æ•°: {correlation:.3f}")
plt.show()


print("å®Œæˆæ•£ç‚¹å›¾ç»ƒä¹ ï¼")
print()

# ==========================================
# ç»ƒä¹ 4ï¼šç›´æ–¹å›¾ - å‘˜å·¥å·¥ä½œå¹´é™åˆ†å¸ƒ
# ==========================================
print("ğŸ“Š ç»ƒä¹ 4ï¼šç›´æ–¹å›¾ - å‘˜å·¥å·¥ä½œå¹´é™åˆ†å¸ƒ")
print("-" * 30)

# æ•°æ®ï¼š50ä¸ªå‘˜å·¥çš„å·¥ä½œå¹´é™
np.random.seed(42)
work_years = np.random.exponential(5, 50)  # æŒ‡æ•°åˆ†å¸ƒï¼Œå¹³å‡5å¹´
work_years = np.clip(work_years, 0, 20)  # é™åˆ¶åœ¨0-20å¹´

print(f"å‘˜å·¥å·¥ä½œå¹´é™æ•°æ®ï¼ˆå‰10ä¸ªï¼‰: {work_years[:10].round(1)}")
print(f"å¹³å‡å·¥ä½œå¹´é™: {np.mean(work_years):.1f}å¹´")

# TODO 4: åˆ›å»ºç›´æ–¹å›¾
# è¦æ±‚ï¼š
# - ä½¿ç”¨ plt.hist() åˆ›å»ºç›´æ–¹å›¾
# - æ·»åŠ æ ‡é¢˜"å‘˜å·¥å·¥ä½œå¹´é™åˆ†å¸ƒ"
# - è®¾ç½®xè½´æ ‡ç­¾ä¸º"å·¥ä½œå¹´é™ï¼ˆå¹´ï¼‰"ï¼Œyè½´æ ‡ç­¾ä¸º"äººæ•°"
# - è®¾ç½®bins=10
# - åˆ†æå¹¶è¾“å‡ºä¸åŒå¹´é™æ®µçš„å‘˜å·¥æ•°é‡

# ä½ çš„ä»£ç ï¼š
plt.figure(figsize=(10, 6))
plt.hist(work_years, bins=10, edgecolor='black')
plt.title('å‘˜å·¥å·¥ä½œå¹´é™åˆ†å¸ƒ')
plt.xlabel('å·¥ä½œå¹´é™ï¼ˆå¹´ï¼‰')
plt.ylabel('äººæ•°')
plt.grid(True)
plt.show()

new_employees = np.sum(work_years < 2)
experienced = np.sum(work_years >= 10)
print(f"æ–°å‘˜å·¥ï¼ˆ<2å¹´ï¼‰: {new_employees}äºº")
print(f"èµ„æ·±å‘˜å·¥ï¼ˆâ‰¥10å¹´ï¼‰: {experienced}äºº")


print("å®Œæˆç›´æ–¹å›¾ç»ƒä¹ ï¼")
print()

# ==========================================
# ç»ƒä¹ æ€»ç»“
# ==========================================
print("ğŸ‰ ç»ƒä¹ å®Œæˆæ£€æŸ¥")
print("=" * 20)
print("è¯·æ£€æŸ¥ä½ æ˜¯å¦å®Œæˆäº†ï¼š")
print("â–¡ ç»ƒä¹ 1ï¼šæŠ˜çº¿å›¾å±•ç¤ºè¶‹åŠ¿")
print("â–¡ ç»ƒä¹ 2ï¼šæŸ±çŠ¶å›¾æ¯”è¾ƒæ•°æ®")
print("â–¡ ç»ƒä¹ 3ï¼šæ•£ç‚¹å›¾åˆ†æå…³ç³»")
print("â–¡ ç»ƒä¹ 4ï¼šç›´æ–¹å›¾è§‚å¯Ÿåˆ†å¸ƒ")
print()
print("ğŸ’¡ å¦‚æœé‡åˆ°å›°éš¾ï¼Œå¯ä»¥ï¼š")
print("1. å›é¡¾notebookä¸­çš„ä¾‹å­")
print("2. æŸ¥çœ‹ä¸‹é¢çš„æç¤º")
print("3. é—®æˆ‘å…·ä½“é—®é¢˜")

# ==========================================
# æç¤ºåŒºåŸŸï¼ˆå¡ä½äº†å†çœ‹ï¼‰
# ==========================================
print("\n" + "="*50)
print("ğŸ’¡ æç¤ºåŒºåŸŸï¼ˆå¡ä½äº†å†çœ‹ï¼‰")
print("="*50)

print("\nğŸ“ˆ ç»ƒä¹ 1æç¤ºï¼ˆæŠ˜çº¿å›¾ï¼‰:")
print("plt.figure(figsize=(10, 6))")
print("plt.plot(days, visits, 'o-', linewidth=2)")
print("plt.title('ç½‘ç«™ä¸€å‘¨è®¿é—®é‡è¶‹åŠ¿')")
print("plt.xlabel('æ—¥æœŸ')")
print("plt.ylabel('è®¿é—®é‡')")
print("plt.grid(True)")
print("plt.show()")

print("\nğŸ“Š ç»ƒä¹ 2æç¤ºï¼ˆæŸ±çŠ¶å›¾ï¼‰:")
print("plt.figure(figsize=(10, 6))")
print("bars = plt.bar(products, sales)")
print("plt.title('äº§å“é”€é‡å¯¹æ¯”')")
print("# æ·»åŠ æ•°å€¼æ ‡ç­¾")
print("for bar, value in zip(bars, sales):")
print("    plt.text(bar.get_x() + bar.get_width()/2, bar.get_height() + 10,")
print("             f'{value}', ha='center')")

print("\nğŸ“ˆ ç»ƒä¹ 3æç¤ºï¼ˆæ•£ç‚¹å›¾ï¼‰:")
print("plt.figure(figsize=(10, 6))")
print("plt.scatter(ad_spend, revenue, s=100)")
print("plt.title('å¹¿å‘ŠæŠ•å…¥ä¸é”€å”®é¢å…³ç³»')")
print("correlation = np.corrcoef(ad_spend, revenue)[0, 1]")
print("print(f'ç›¸å…³ç³»æ•°: {correlation:.3f}')")

print("\nğŸ“Š ç»ƒä¹ 4æç¤ºï¼ˆç›´æ–¹å›¾ï¼‰:")
print("plt.figure(figsize=(10, 6))")
print("plt.hist(work_years, bins=10, edgecolor='black')")
print("plt.title('å‘˜å·¥å·¥ä½œå¹´é™åˆ†å¸ƒ')")
print("# åˆ†æå¹´é™æ®µ")
print("new_emp = np.sum(work_years < 2)")
print("exp_emp = np.sum(work_years >= 10)")

print("\nğŸ¯ è®°ä½ï¼šå…ˆè‡ªå·±å°è¯•ï¼Œå†çœ‹æç¤ºï¼")
print("ğŸš€ å®Œæˆåä½ å°±æŒæ¡äº†æ•°æ®å¯è§†åŒ–çš„åŸºæœ¬æŠ€èƒ½ï¼") 